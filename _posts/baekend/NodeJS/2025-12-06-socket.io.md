---
layout: post
related_posts:
  - /backend/nodejs
title: "[Node.js] Socket.IO"
date: 2025-11-19
categories:
  - backend
  - nodejs
description: >

---
* toc
{:toc .large-only}



🌐 Server()에 대한 설명 (Socket.IO)Server()는 Node.js 환경에서 Socket.IO 서버 인스턴스를 생성하는 클래스(또는 함수)입니다. 이 인스턴스는 클라이언트와 실시간 양방향 통신을 설정하고 관리하는 중심 역할을 수행합니다.const io = new Server(server, options); 형태로 사용되며, 여기서 io가 바로 Socket.IO 서버 인스턴스입니다.1. ⚙️ Server()의 주요 역할Server() 인스턴스는 다음과 같은 핵심 기능을 담당합니다.HTTP 서버 연결 수용: 일반 HTTP 서버 인스턴스(server)를 인수로 받아 해당 서버의 포트를 통해 들어오는 실시간 통신 요청을 가로채고 처리합니다.핸드셰이크 및 업그레이드: 클라이언트가 Socket.IO 연결을 시도할 때, 초기 HTTP 핸드셰이크 요청을 처리하고, 가능하면 웹소켓(WebSocket) 프로토콜로 통신을 업그레이드하여 효율적인 연결을 수립합니다.이벤트 관리: 클라이언트로부터 들어오는 이벤트(예: '채팅 메시지 전송')를 수신하고, 서버에서 클라이언트로 이벤트를 보낼 수 있는 기능(예: '새 메시지 방송')을 제공합니다.네임스페이스 및 룸 관리: 여러 채널이나 그룹(예: '뉴스', '스포츠' 네임스페이스)을 만들어 통신을 분리하거나, 특정 사용자 그룹(룸)에게만 메시지를 전송하는 기능을 제공합니다.2. 📝 Server() 초기화 시 주요 인자new Server(server, options)에서 사용하는 주요 인자는 다음과 같습니다.인자설명필수/선택serverNode.js HTTP 서버 인스턴스입니다. 보통 Express 앱을 기반으로 생성한 http.createServer(app) 객체를 전달합니다. Socket.IO는 이 서버에 붙어 실시간 연결을 처리합니다.필수optionsSocket.IO 서버의 동작을 세부적으로 설정하는 설정 객체입니다.선택options 객체의 핵심 속성:cors: 다른 출처(Cross-Origin)의 클라이언트가 실시간 연결을 시도할 때 허용할지 정의합니다. (이전에 논의된 가장 중요한 설정)JavaScriptcors: {
  origin: "http://localhost:3000",
  methods: ["GET", "POST"]
}
path: Socket.IO 클라이언트가 연결할 서버 경로를 지정합니다. 기본값은 /socket.io/입니다.pingTimeout / pingInterval: 클라이언트와 서버가 연결을 유지하고 있는지 확인(Heartbeat)하는 시간 간격과 타임아웃을 설정합니다.3. 🖥️ 사용 예시 (코드와 역할)JavaScript// 1. http 모듈에서 필요한 함수 가져오기
const http = require('http'); 
const { Server } = require("socket.io"); // Socket.IO Server 클래스 가져오기
const express = require('express');

// 2. Express 앱 생성
const app = express(); 
const server = http.createServer(app); // Express 앱을 기반으로 HTTP 서버 생성

// 3. Socket.IO Server 인스턴스 생성 및 연결 (io)
const io = new Server(server, {
  cors: {
    origin: "http://localhost:3000"
  }
}); 

// 4. Socket.IO 이벤트 처리 시작
io.on('connection', (socket) => {
  // 클라이언트가 연결될 때마다 실행됨
  console.log('새로운 유저가 연결되었습니다.', socket.id);
  
  socket.on('disconnect', () => {
    console.log('유저가 연결을 끊었습니다.');
  });
});

// 5. 서버 리스닝
server.listen(4000, () => {
  console.log('서버가 4000번 포트에서 실행 중입니다.');
});
위 코드에서 생성된 io 객체가 바로 클라이언트와 실시간 소통하는 Socket.IO 서버이며, 서버 전체에 이벤트를 방송하거나 특정 소켓을 찾는 등 모든 실시간 통신을 이 객체를 통해 관리합니다.