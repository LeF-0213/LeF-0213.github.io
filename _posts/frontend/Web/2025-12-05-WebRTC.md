---
layout: post
related_posts:
    - /frontend/web
title:  "WebRTC API(Web Real-Time Communnication)"
date:   2025-11-13
categories:
  - frontend
  - web
description: >
  
---
* toc
{:toc .large-only}

# π WebRTCλ€ λ¬΄μ—‡μΈκ°€? [WevRTC API κ³µμ‹λ¬Έμ„](https://developer.mozilla.org/ko/docs/Web/API/WebRTC_API#webrtc_%EA%B0%9C%EB%85%90_%EB%B0%8F_%EC%82%AC%EC%9A%A9%EB%B2%95)

WebRTC(Web Real-Time Communicaition)λ” μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό μ‚¬μ΄νΈκ°€ μ¤‘κ°„μ(Middleman) μ—†μ΄ λΈλΌμ°μ € κ°„μ— μ¤λ””μ¤λ‚ μμƒ λ―Έλ””μ–΄λ¥Ό ν¬μ°©ν•κ³  λ§μλ€λ΅ μ¤νΈλ¦Όν•  λΏλ§ μ•„λ‹λΌ, μ„μμ λ°μ΄ν„°λ„ κµν™ν•  μ μλ„λ΅ ν•λ” κΈ°μ μ΄λ‹¤.

---

## P2P ν†µμ‹ μ ν•µμ‹¬ κ°λ…
**μ „ν†µμ μΈ ν΄λΌμ΄μ–ΈνΈ - μ„λ²„ λ¨λΈ:**

> μ‚¬μ©μ A -> μ„λ²„ -> μ‚¬μ©μ B      
> * μ„λ²„κ°€ μ¤‘κ°„μ μ—­ν• μ„ ν•κ³  λ¨λ“  λ°μ΄ν„°κ°€ μ„λ²„λ¥Ό κ²½μ      
> * μ„λ²„ λ€μ—­ν­ λΉ„μ© λ°μƒ     
> * μ§€μ—°μ‹κ°„(Latency) μ¦κ°€

**WebRTC P2P λ¨λΈ:**

> μ‚¬μ©μ A <-> μ‚¬μ©μ B         
> * μ„λ²„ μ—†μ΄, λΈλΌμ°μ €λΌλ¦¬ μ§μ ‘ μ—°κ²°     
> * μ„λ²„ λ¶€ν• μµμ†ν™” (μ΄κΈ° μ—°κ²° μ„¤μ •λ§ μ‚¬μ©)      
> * λ‚®μ€ μ§€μ—°μ‹κ°„ (λ³΄ν†µ 100ms μ΄ν•)

<br />

μ¦‰, WebRTCλ€ μ›Ή λΈλΌμ°μ €μ™€ λ¨λ°”μΌ μ• ν”λ¦¬μΌ€μ΄μ… κ°„μ— **λ³„λ„μ ν”λ¬κ·ΈμΈ μ—†μ΄** μ‹¤μ‹κ°„ μμ„±, μμƒ ν†µν™”, P2P(Peer-to-Peer) λ°μ΄ν„° ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•λ” μ¤ν”μ†μ¤ κΈ°λ°μ **μ›Ή μ‹¤μ‹κ°„ ν†µμ‹  κΈ°μ  ν‘μ¤€(API)**μ΄λ‹¤.

μ΄λ¥Ό μ„ν•μ—¬ WebRTCλ” μƒνΈ μ—°κ΄€λ APIμ™€ ν”„λ΅ν† μ½λ΅ κµ¬μ„±λμ–΄ ν•¨κ» μ‘λ™ν•λ‹¤.

<br />

---

## WebRTCμ ν•µμ‹¬ νΉμ§•
1. ν”λ¬κ·ΈμΈ λ¶ν•„μ” (Zero Installation)
  ```js
  // λ³„λ„ μ„¤μΉ μ—†μ΄ λΈλΌμ°μ € APIλ§μΌλ΅ λ™μ‘
  const stream = await navigator.mediaDevices.getUserMedia({video: true})
  ```
2. ν•„μ μ•”νΈν™”(Mandatory Encryption)
   * **DTLS(Datagram Transport Layer Security)**: λ°μ΄ν„° μ±„λ„ μ•”νΈν™”
   * **SRTP(Secure Real-time Transport Protocol)**: λ―Έλ””μ–΄ μ¤νΈλ¦Ό μ•”νΈν™”
   * μ¤‘κ°„μ κ³µκ²©(MITM) λ°©μ§€
3. λΈλΌμ°μ € λ„¤μ΄ν‹°λΈ μμ›
   * Chrome, Firefox, Safari, Edge (2024λ…„ κΈ°μ¤€ 98% μ΄μƒ μ§€μ›)
   * λ¨λ°”μΌ: iOS Safari, Android Chrome
4. μ¤ν”μ†μ¤ & λ¬΄λ£
   * λ΅μ—΄ν‹° μ—†μ 

<br /> 

---

## WebRTC κ°λ… λ° μ‚¬μ©λ²•

> WebRTCλ” μ—¬λ¬κ°€μ§€ λ©μ μΌλ΅ μ‚¬μ©λ  μ μμΌλ©°, Media Capture and Streams APIμ™€ μƒλ‹Ήν λ§μ€ λ¶€λ¶„μ΄ κ²ΉμΉλ‹¤. μ΄ λ‘μ€ μ„λ΅ μƒνΈμ‘μ©μ„ ν•λ©΄μ„ μ›Ήμ— κ°•λ ¥ν• λ©€ν‹°λ―Έλ””μ–΄ κΈ°λ¥μ„ μ κ³µν•λ‹¤.

> μλ¥Ό λ“¤μ–΄ μμ„±, ν™”μƒ νμ, νμΌ κµν™, κ³„μ • κ΄€λ¦¬, DTMF μ‹κ·Έλ„μ„ μ΄μ©ν•΄ legacy telephone μ‹μ¤ν… interfacing λ“±μ΄ μλ‹¤. Peerλ“¤ κ°„μ μ»¤λ„¥μ…μ΄ λ§λ“¤μ–΄μ§€λ”λ° μ–΄λ–¤ λ“λΌμ΄λ²„λ‚ ν”λ¬κ·ΈμΈλ„ ν•„μ”ν•μ§€ μ•λ”λ‹¤.

> λ‘ Peer κ°„μ μ»¤λ„¥μ…μ€ `RTCPeerConnection` μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ΄λ£¨μ–΄μ§„λ‹¤. μ»¤λ„¥μ…μ΄ μ΄λ£¨μ–΄μ§€κ³  μ—΄λ¦¬λ©΄, λ―Έλ””μ–΄ μ¤νΈλ¦Όλ“¤(`MediaStream`) κ³Ό λ°μ΄ν„° μ±„λ„ (`RTCDataChannel`)λ“¤μ„ μ»¤λ„¥μ…μ— μ—°κ²°ν•  μ μλ‹¤.

> λ―Έλ””μ–΄ μ¤νΈλ¦Όλ“¤μ€ λ―Έλ””μ–΄ μ •λ³΄λ¥Ό κ°€μ§€λ” λ‹¤μμ νΈλ™λ“¤λ΅ κµ¬μ„±λ  μ μλ‹¤. `MediaStreamTrack` μΈν„°νμ΄μ¤ objectλ¥Ό λ² μ΄μ¤λ΅ ν•λ” νΈλ™μ€ μμ„±, μμƒ λ° ν…μ¤νΈ(μ λ© λλ” μ±•ν„°μ΄λ¦„ κΉμ§€)λ¥Ό ν¬ν•¨ν•λ” λ‹¤μ–‘ν• λ―Έλ””μ–΄ λ°μ΄ν„°μ νƒ€μ… μ¤‘ ν•λ‚λ¥Ό ν¬ν•¨ν•  μ μλ‹¤. λ€λ¶€λ¶„μ μ¤νΈλ¦Όλ“¤μ€ μ μ–΄λ„ ν• κ° μ΄μƒμ μμ„±(μμƒ) νΈλ™μΌλ΅ κµ¬μ„±λμ–΄ μκ³ , live λ―Έλ””μ–΄(μ›Ή μΊ  λ“±)λ‚ μ €μ¥λ(μ¤νΈλ¦¬λ°)λ―Έλ””μ–΄λ“¤μ„ μ „μ†΅ν•κ³  λ°›μ„ μ μλ‹¤.

> λν•, μ„μμ λ°”μ΄λ„λ¦¬ λ°μ΄ν„°(μ΄λ―Έμ§€λ“  ν…μ¤νΈλ“  νμΌμ΄λ“  λ¨λ‘ κ°€λ¥ν•λ‹¤)λ¥Ό `RTCDataChannel` μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ Peerλ“¤ κ°„μ— κµν™ν•  μ μλ‹¤. μ΄κ²ƒμ€ back-channel μ •λ³΄λ“¤, λ©”νƒ€λ°μ΄ν„° κµν™, κ²μ„ status ν¨ν‚·λ“¤, νμΌ κµν™, λ°μ΄ν„° κµν™μ„ μ„ν• primary channel λ“±μ— μ“°μΌ μ μλ‹¤.

<br />

---

##  WebRTCμ κµ¬μ„±μ”μ†

### π“‘ MediaStream

`MediaStream`μ€ `Media Capture and Stream API`μ ν•µμ‹¬ μΈν„°νμ΄μ¤λ΅, **λ―Έλ””μ–΄ μ½ν…μΈ μ μ¤νΈλ¦Ό**μ„ λ‚νƒ€λ‚Έλ‹¤. μ‰½κ² λ§ν•΄, μΉ΄λ©”λΌ, λ§μ΄ν¬, ν™”λ©΄ λ…Ήν™” λ“±μ—μ„ μ–»μ€ **μ‹κ°„μ νλ¦„μ— λ”°λ¥Έ μ—°μ†μ μΈ μ¤λ””μ¤ λ° λΉ„λ””μ¤ λ°μ΄ν„°** λ¬¶μμ„ λ‹¤λ£¨λ” κ°μ²΄μ΄λ‹¤.

#### π·οΈ μ£Όμ” κ°λ… λ° νΉμ§•

##### μ¤νΈλ¦Όκ³Ό νΈλ™

ν•λ‚μ μ¤νΈλ¦Όμ€ **μ—¬λ¬ κ°μ νΈλ™(Tracks)**λ΅ κµ¬μ„±λ  μ μμΌλ©°, κ° νΈλ™μ€ `MediaStreamTrack` μΈμ¤ν„΄μ¤(μ‹¤μ  λ―Έλ””μ–΄μ ν• μΆ…λ¥)λ΅ ν‘ν„λλ‹¤. (μ: λΉ„λ””μ¤ νΈλ™ 1κ° + μ¤λ””μ¤ νΈλ™ 1κ°)

##### `MediaStream()` μƒμ„±μ(Constructor)

`MediaStream()` μƒμ„±μλ” **μƒλ΅­κ² μƒμ„±λ `MediaStream` κ°μ²΄λ¥Ό λ°ν™**ν•λ‹¤. 

> * **λ§¤κ°λ³€μκ°€ μ—†μΌλ©΄** β†’ νΈλ™μ΄ μ—†λ” λΉ μ¤νΈλ¦Ό μƒμ„±
> * **MediaStreamμ„ μ „λ‹¬ν•λ©΄** β†’ μ „λ‹¬λ μ¤νΈλ¦Όμ νΈλ™μ„ κ³µμ ν• μƒ μ¤νΈλ¦Ό μƒμ„±
> * **νΈλ™ λ°°μ—΄μ„ μ „λ‹¬ν•λ©΄** β†’ ν•΄λ‹Ή νΈλ™λ“¤λ§ ν¬ν•¨ν•λ” μƒλ΅μ΄ μ¤νΈλ¦Ό μƒμ„±

| κµ¬λ¬Έ(Syntax)              | λ§¤κ°λ³€μ(Parameter)            | κ²°κ³Ό(Result) |
|---------------------------|--------------------------------|--------------|
| `new MediaStream()`       | μ—†μ                           | νΈλ™μ΄ μ—†λ” **λΉ**(Empty) `MediaStream` κ°μ²΄ μƒμ„± |
| `new MediaStream(stream)` | κΈ°μ΅΄ `MediaStream` κ°μ²΄          | μ›λ³Έ μ¤νΈλ¦Όμ **λ¨λ“  νΈλ™μ„ κ³µμ **ν•λ” μƒλ΅μ΄ `MediaStream` μƒμ„± |
| `new MediaStream(tracks)` | `MediaStreamTrack` κ°μ²΄ λ°°μ—΄     | **μ§€μ •λ νΈλ™λ“¤λ§ ν¬ν•¨**ν•λ” μƒλ΅μ΄ `MediaStream` μƒμ„± |


### π“‘ `MediaDevices`μ μ—­ν• 

```js
var mediaDevices = navigator.mediaDevices;
```

`MediaDevice` μΈν„°νμ΄μ¤λ” WebRTC ν‘μ¤€μ μΌλ¶€λ΅, μ›Ή λΈλΌμ°μ €κ°€ μ‚¬μ©μμ—κ² κ¶ν•μ„ μ”μ²­ν•μ—¬ **μΉ΄λ©”λΌ, λ§μ΄ν¬, κ³µμ  ν™”λ©΄** λ“± ν„μ¬ μ—°κ²°λ λ―Έλ””μ–΄ μ…λ ¥ μ¥μΉ(ν•λ“μ›¨μ–΄)λ΅μ μ ‘κ·Ό λ°©λ²•μ„ μ κ³µν•λ” μΈν„°νμ΄μ¤μ΄λ‹¤. 

#### μ΄λ²¤νΈ
**devicechange, ondevicechange**

```js
addEventLister("devicechange", (event) => {})

ondevicechange = (event) => {}
```  

μ‚¬μ©μ μ»΄ν“¨ν„°μ— λ―Έλ””μ–΄ μ…μ¶λ ¥ μ¥μΉκ°€ μ¶”κ°€λκ±°λ‚ μ κ±°λμ„ λ• λ°μƒν•λ‹¤. μλ¥Ό λ“¤μ–΄, μ°λ¦¬κ°€ `updateDeviceList()` ν•¨μλ¥Ό μƒμ„±ν•λ©΄, μ΄ ν•¨μλ” **λ‘ κ°€μ§€ μƒν™©**μ—μ„ νΈμ¶λλ‹¤.

1. `MediaDevices.getUserMedia()`κ°€ **μ¤νΈλ¦Όμ΄ μ„±κ³µμ μΌλ΅ μ–»μ—μ„ λ•** μµμ΄ 1νμ™€,
2. κ·Έ μ΄ν›„ **μ¥μΉ λ©λ΅μ΄ λ³€κ²½λ  λ•λ§λ‹¤** νΈμ¶λλ‹¤.

#### λ©”μ„λ“

λ¶€λ¨ μΈν„°νμ΄μ¤μΈ `EventTarget`μ μ†μ„±μ„ μƒμ†ν•λ‹¤.

> * **`enumerateDevices()`**   
> μ‹μ¤ν…μ—μ„ μ‚¬μ© κ°€λ¥ν• λ―Έλ””μ–΄ μ…μ¶λ ¥ μ¥μΉμ μ •λ³΄λ¥Ό λ‹΄μ€ λ°°μ—΄μ„ κ°€μ Έμ¨λ‹¤.    
> * **`getSupportedConstraints()`**
> `MediaStreamTrack` μΈν„°νμ΄μ¤κ°€ μ§€μ›ν•λ” μ μ•½μ„ λ‚νƒ€λ‚΄λ” `MediaTrackSupportedConstraints` νΈν™ κ°μ²΄λ¥Ό λ°ν™ν•λ‹¤.      
> * **`getDisplayMedia`**     
> `MediaStream`μΌλ΅ μΊ΅μ²ν•΄ κ³µμ λ‚ λ…Ήν™” μ©λ„λ΅ μ‚¬μ©ν•  ν™”λ©΄ νΉμ€ ν™”λ©΄μ μΌλ¶€(μ°½)μ„ μ„ νƒν•λ„λ΅ μ‚¬μ©μμ—κ² μ”μ²­ν•λ‹¤. `MediaStream`μΌλ΅ μ΄ν–‰ν•λ” `Promise`λ¥Ό λ°ν™ν•λ‹¤.
> * **`getUserMedia()`**
> μ‚¬μ©μμ—κ² κ¶ν•μ„ μ”μ²­ν• ν›„, μ‹μ¤ν…μ μΉ΄λ©”λΌμ™€ μ¤λ””μ¤ κ°κ° νΉμ€ λ¨λ‘ ν™μ„±ν™”ν•μ—¬, μ¥μΉμ μ…λ ¥ λ°μ΄ν„°λ¥Ό λΉ„λ””μ¤/μ¤λ””μ¤ νΈλ™μΌλ΅ ν¬ν•¨ν• `MediaStream`μ„ λ°ν™ν•λ‹¤.

```js
const stream 
```

---

### π“‘ RTCPeerConnection

λ΅μ»¬ μ»΄ν“¨ν„°μ™€ μ›κ²© ν”Όμ–΄κ°„μ WebRTC μ—°κ²°μ„ λ‚νƒ€λ‚Έλ‹¤. λ‘ ν”Όμ–΄ κ°„μ ν¨μ¨μ μΈ λ°μ΄ν„° μ¤νΈλ¦¬λ°μ„ μ²λ¦¬ν•λ”λ° μ‚¬μ©λλ‹¤.



---

### π“‘ RTCDataChannel

---

## Signalling Serverμ μ—­ν• 

---

## STUN / TURN μ„λ²„ κ°λ…

---

## WebRTC μ—°κ²° νλ¦„λ„(Offer -> Answer-> ICE)










